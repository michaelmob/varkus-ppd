{% extends "cp.html" %}
{% load static %}
{% load currency %}

{% block title %}List Locker{% endblock %}

{% block tab %}lists{% endblock %}

{% block content %}
<form class="ui modal" method="POST" action="{% url "lists" %}">
	<i class="close icon"></i>
	<div class="header">
		Create List
	</div>
	<div class="content">
		<div class="ui form">
			{% csrf_token %}

			<div class="field">
				<label>List Name</label>
				{{ form.name }}
			</div>

			<div class="field">
				<label>Description <small><i>Optional</i></small></label>
				{{ form.description }}
			</div>

			<div class="field">
				<label>Individual Item Name</label>
				{{ form.item_name }}
			</div>

			<div class="field">
				<label>Items</label>
				{{ form.items }}
			</div>

			<div class="field">
				<label>Delimeter</label>
				{{ form.delimeter }}
			</div>

			<div class="field">
				<label>Distribution Order</label>
				{{ form.order }}
			</div>

			<div class="field">
				<div class="ui checkbox">
					{{ form.reuse }}
					<label>Allow re-use of items</label>
				</div>
			</div>
		</div>

	</div>
	<div class="actions">
		<div class="ui black button">
			Cancel
		</div>
		<div class="ui left labeled icon positive primary submit button">
			Create
			<i class="checkmark icon"></i>
		</div>
	</div>
</form>

<div class="wrapper">
	<div class="ui grid stackable">
		<div class="ten wide column">
			<div class="box">
				<div class="title">
					<i class="list layout icon"></i>
					Lists
				</div>
				<div class="content">

					{% include "cp/paginate.html" with items=lists uri="lists-page" %}

					<table class="ui table">
						<thead>
							<tr>
								<th>Name</th>
								<th>Items</th>
								<th>Leads</th>
								<th>Total</th>
							</tr>
						</thead>

						<tbody>
							{% if lists|length < 1 %}
							<td colspan="5">You have not created any lists, yet.</td></tr>
							{% else %}
							{% for list in lists %}
							<tr>
								<td><a href="{% url "lists-manage" list.code %}">{{ list.name }}</a></td>
								<td>{{ list.item_count }}</td>
								<td>{{ list.earnings.leads|default:"0" }}</td>
								<td>${{ list.earnings.total|currency }}</td>
							</tr>
							{% endfor %}
							{% endif %}
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div class="six wide column">
			<div class="box">
				<div class="title">
					<i class="add square icon"></i>
					Create
				</div>
				<div class="padded content">

					<div class="ui left labeled icon fluid basic create button{% if lists|length >= MAX_LISTS %} disabled{% endif %}">
						<i class="plus icon"></i>
						Create List
					</div>

					<br/>

					<p>You have created {{ lists|length }} list(s) out of your maximum list limit of {{ MAX_LISTS }}.</p>

					<div class="ui header">List Lockers</div>
					<p>
						The list locker is a locker created specifically to lock lists.
						You can use the various options to customize how the user obtains
						one of the items from the list.
					</p>

					<p>
						A list can be set so that its items are distributed: descending,
						ascending, or randomly. It can also be set to only output an item
						that was not previously distributed.
					</p>

					<p>
						Common usage for this locker would be to lock a list of serials or
						keys. For example, keys for your indie game that you want to give
						out for free but still want to make a profit off of.
					</p>
				</div>
			</div>
		</div>
	</div>
</div>

<script>var items = {{ item.items|safe }};</script>
<script src="{% static "js/forms/lists.js" %}"></script>
{% endblock %}
