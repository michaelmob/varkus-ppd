{% extends 'cp.html' %}
{% load static %}
{% load django_tables2 %}

{% block title %}Tickets{% endblock %}

{% block tab %}tickets{% endblock %}

{% block content %}
<div class="wrapper">

	<div class="ui two column grid stackable no margin">
		<div class="column">
			<div class="ui segment box">
				<div class="title">
					<i class="ticket icon"></i>
					Create Ticket
				</div>
				<div class="padded content">
					<form class="ui divided relaxed form" method="POST" enctype="multipart/form-data" action="{% url 'tickets' %}">
						{% csrf_token %}
						<div class="ui error message"></div>

						<div class="field">
							<label>Subject</label>
							<div class="ui input">
								{{ form.subject }}
							</div>
						</div>

						<div class="two fields">
							<div class="field">
								<label>Priority</label>
								<div class="ui input">
									<div class="ui selection fluid dropdown">
										<input type="hidden" name="priority">
										<div class="default text">Choose a priority</div>
										<i class="dropdown icon"></i>
										<div class="menu">
											{% for priority in priorities %}
												<div class="item" data-value="{{ priority.0 }}">{{ priority.1 }}</div>
											{% endfor %}
										</div>
									</div>
								</div>
							</div>

							<div class="field">
								<label>Type</label>
								<div class="ui input">
									<div class="ui selection fluid dropdown">
										<input type="hidden" name="type">
										<div class="default text">Choose a type</div>
										<i class="dropdown icon"></i>
										<div class="menu">
											{% for type in types %}
											<div class="item" data-value="{{ type.0 }}">{{ type.1 }}</div>
											{% endfor %}
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="field">
							<label>Message</label>
							{{ form.message }}
						</div>

						<div class="field">
							<label>Upload Image <em>(Optional)</em></label>
							{{ form.image }}
						</div>

						<div class="field no margin">
							<div class="ui fluid labeled icon buttons">
								<div class="ui submit primary button">
									<i class="add icon"></i>
									Submit Ticket
								</div>
							</div>
						</div>

					</form>
				</div>
			</div>
		</div>

		<div class="column">
			<div class="ui segment box">
				<div class="title">
					<i class="list layout icon"></i>
					Tickets
				</div>
				<div class="content">
					{% render_table table 'cp/table.html' %}
				</div>
			</div>
		</div>
	</div>
</div>

<script src="{% static 'js/forms/tickets.js' %}"></script>
{% endblock %}
